# AI Agent Architectural Guidelines

## ⚠️ 絶対に守るべきプロジェクトの教訓・歴史
AIエージェントとして本プロジェクト(`TikTok Growth Director`)のコードを修正・改修する前に、**必ず以下のファイルを読んでください。**
これを怠ると、過去に起きた「レイアウトの崩壊」や「画像の低品質化（ダミー化）」、「嘘の口コミ数出力」といったデグレ（改悪）が再発します。

**必読ファイル:**
`docs/architecture_history.md`

## 🚫 禁止事項
1. **口コミ数の動的スクレイピング追加**
   Googleマップ等の強力なBot対策を回避しようと、スクリプト(`generate_post.js`等)で無理に口コミ数を取得しにいかないでください。情報は常に `batch_areas.json` に手書き（またはAIが書き込んだ）数値を100%信用する「ローカル信用モデル」を採用しています。
2. **正常なCSS/レイアウトの無断変更**
   最初の `slide_generator.html` のレイアウトは非常に洗練されていました。不用意に全体のCSSを変えず、基本はそれを再利用してください。
3. **Puppeteerでの不確かな画像クリックイベントの多用**
   不完全なWebセレクタ操作は高画質画像の取りこぼしにつながります。現在は `googlethis` ライブラリの直接URL取得など、確実性の高い手法に移行しています。必ずまずは「1店舗限定の画像出力テスト（`test_single_slide.js`）」を作って、完璧な画質・レイアウトの1枚の画像が落ちてくるかを検査してからループ処理に組み込んでください。
