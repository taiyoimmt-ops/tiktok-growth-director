---
description: TikTok穴場スポット投稿の作成ワークフロー
---

# Workflow: 1エリア分のTikTokフルオート生成

ユーザーから「〇〇エリアでお願い」と指示された場合、以下のステップを自律的に実行してコンテンツを生成する。

// turbo-all

## Step 1: 情報リサーチと設計（Research & Design）
- ユーザーが指定したエリア（例：渋谷、鎌倉）について、TikTokでバズりやすい「デート」「穴場」「カフェ/グルメ」の切り口で5〜6店舗をリサーチする。
- 店名、Googleの評価・口コミ数、予算、おすすめポイント（裏技や魅力）を収集。
- `.agent/rules/tiktok_rules.md` に従い、親しみやすいキャプションテキストを作成する。

## Step 2: ジェネレータスクリプトの作成（Script Preparation）
- `getmoney` フォルダ内に、このエリア専用の自動生成スクリプト（例: `generate_shibuya.js` のような一時スクリプト、または汎用スクリプトへの引数渡し）を用意する。
- スクリプト内には以下の仕様を必ず含めること：
  1. Puppeteerによるスクレイピング（UserAgent偽装等でGoogle画像検索の高品質画像を確実に取得）
  2. HTMLテンプレート（`slide_generator.html` 等）へのデータ流し込み
  3. TikTokサイズ（450x800）での精密なスクリーンショット取得
  4. 完了後の一時ファイル削除とブラウザの確実なクローズ

## Step 3: コンテンツの生成と保存（Execution）
- スクリプトを実行する（`node generate_xxx.js`）。
- 実行中、エラーなく高画質な背景画像が取得されているかプロセスのログを監視する。
- 失敗した場合は再検索等で自己解決を試みる。

## Step 4: 最終パッケージの作成と納品（Packaging）
- 生成された9枚のスライド画像と `caption.txt` を1つのフォルダ（例: `content_library/007_shibuya_date`）にまとめる。
- PowerShell（または Node.js の機能）を用いて、そのフォルダをZIP圧縮する。
- ZIPファイルは必ず **`getmoney/ready_to_post_zips/`** へ移動・保存する。
- （デスクトップ等、それ以外の場所にファイルを残さないこと）

## Step 5: スプレッドシート用データの出力と報告（Reporting）
- GAS（スプレッドシート）のTikTok投稿DBへコピペするための5項目（エリア、店名、口コミ数、投稿日、キャプション）のテキストデータを標準出力（またはユーザーへのチャット）に表示する。
- 納品場所（`ready_to_post_zips`）をユーザーに案内し、タスクを完了する。
